!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.AdobeMessagingClient=t():e.AdobeMessagingClient=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=17)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=d(n(3)),s=d(n(18)),r=d(n(19)),l=d(n(1));d(n(9)),d(n(5));function d(e){return e&&e.__esModule?e:{default:e}}var u={DOCKED:"docked",POPOUT:"popout"},c=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.getAppVersion=function(){return t.appver},this.setMessagingWindowState=function(e){t.messagingWindowState=e},this.getMessagingWindowState=function(){return t.messagingWindowState},this.IsCookiesEnabled=function(){return t.initJson.cookiesEnabled},this.getMessagingUIURL=function(){return t.serverInitResponse.releaseControl.adobeMessagingClientURL},this.updateInitContext=function(e){t.initJson.validateAndModifyContext(e)},this.updateAccessToken=function(e){t.initJson.updateAccessToken(e)},this.handleInitData=function(e){t.initJson.validateAndInitContext(e),t.msgdebug=e.msgdebug,t.env=t.initJson.env},this.handleInitResponse=function(e){e.userProfileInfo&&(t.userProfile=e.userProfileInfo),t.serverInitResponse.setResponse(e),t.messagingWindowState=t.serverInitResponse.messagingState.windowState},this.setOnReadyStateAndTriggerPendingCallbacks=function(){t.isAdobeMessagingClientReady=!0,o.default.sendMessageToHost(o.default.hostCallbacks.TRIGGER_ON_READY_CALLBACKS)},this.getContextInfo=function(){var e=a({},t.initJson);return delete e.callbacks,e.context.conversationExists=t.serverInitResponse.messagingState.conversationExists,e.context.uiFallbackLocale=t.serverInitResponse.uiFallbackLocale,e.context.agentFallbackLocale=t.serverInitResponse.agentFallbackLocale,e.context.enterpriseTeamLocale=t.serverInitResponse.enterpriseTeamLocale,e.popOutEnabled=t.serverInitResponse.uiPolicy.popOutEnabled,e.soundEnabled=t.serverInitResponse.uiPolicy.soundEnabled,e.floodgateData=t.serverInitResponse.releaseControl.floodgateData,e.cookieGuid=t.serverInitResponse.cookieGuid,e.ipAddress=t.serverInitResponse.ipAddress,e},this.setInitConfig=function(e){t.initConfig=e},this.getCommonAnalyticsParams=function(){return{"event.category":t.initJson.appType.toUpperCase(),"event.url":location.href,"event.referrer":document.referrer,"event.user_agent":navigator.userAgent,"source.version":t.initJson.appver,"source.platform":t.initJson.appType,"source.os_version":"","env.com.name":l.default.getClientAppId(),"env.com.version":l.default.getClientVersion(),"event.ip":t.serverInitResponse.ipAddress}},this.isAdobeMessagingClientReady=!1,this.isAdobeMessagingClientLoadStarted=!1,this.initJson=new s.default,this.serverInitResponse=new r.default,this.config={},this.appid="AdobeMessaging",this.appver="2.24.1",this.conversationActive=!1,this.env="prod",this.messagingWindowState=this.messagingWindowStateEnum.DOCKED,this.initStarted=!1,this.msgdebug=!1,this.userProfile={},this.leConversationId="",this.clientSessionId="",this.skillName="",this.initConfig={}}return i(e,[{key:"messagingWindowStateEnum",get:function(){return u}}]),e}();t.default=new c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=r(n(0)),o=r(n(4)),s=r(n(2));function r(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"isEmpty",value:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return JSON.stringify(e)===JSON.stringify({})}},{key:"getClientAppId",value:function(){return i.default.appid}},{key:"getClientVersion",value:function(){return i.default.appver}},{key:"isHidden",value:function(e){return"none"===window.getComputedStyle(e).display}},{key:"getUUID",value:function(){var e,t,n="";for(e=0;e<32;e++)t=16*Math.random()|0,8!=e&&12!=e&&16!=e&&20!=e||(n+="-"),n+=(12==e?4:16==e?3&t|8:t).toString(16);return n}},{key:"getJarvisClientRootUrlByEnv",value:function(){if("local"===i.default.env)return".";var e="";if("dev"===i.default.env)e=o.default.CLIENT_DEV_PATH;else if("qe"===i.default.env)e=o.default.CLIENT_QE_PATH;else if("integration"===i.default.env)e=o.default.CLIENT_INTEGRATION_PATH;else if("stage"===i.default.env)e=o.default.CLIENT_STAGE_PATH;else if("prod"===i.default.env)e=o.default.CLIENT_PROD_PATH;else{if("authoring"!==i.default.env)return void s.default.error("Wrong environment");e=o.default.CLIENT_AUTHORING_PATH}return e+"/"+this.getClientVersion()}}]),e}();t.default=new l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(n(0));var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"debug",value:function(){if(i.default.msgdebug){var e=Array.prototype.slice.call(arguments);console.debug.apply(console,e)}}},{key:"error",value:function(){if(i.default.msgdebug){var e=Array.prototype.slice.call(arguments);console.error.apply(console,e)}}},{key:"warn",value:function(){if(i.default.msgdebug){var e=Array.prototype.slice.call(arguments);console.warn.apply(console,e)}}},{key:"log",value:function(){if(i.default.msgdebug){var e=Array.prototype.slice.call(arguments);console.info.apply(console,e)}}},{key:"info",value:function(){if(i.default.msgdebug){var e=Array.prototype.slice.call(arguments);console.info.apply(console,e)}}}]),e}();t.default=new o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(n(0));var o={INIT_SUCCESS_CALLBACK:"INIT_SUCCESS_CALLBACK",INIT_ERROR_CALLBACK:"INIT_ERROR_CALLBACK",SIGN_IN_CALLBACK:"SIGN_IN_CALLBACK",GET_CONTEXT_CALLBACK:"GET_CONTEXT_CALLBACK",TRIGGER_ON_READY_CALLBACKS:"TRIGGER_ON_READY_CALLBACKS"},s=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sendMessageToHost=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{switch(e){case t.hostCallbacks.INIT_SUCCESS_CALLBACK:t.adbmsg_initSuccessCallback(n);break;case t.hostCallbacks.INIT_ERROR_CALLBACK:t.adbmsg_initErrorCallback(n);break;case t.hostCallbacks.SIGN_IN_CALLBACK:t.adbmsg_signCallback();break;case t.hostCallbacks.GET_CONTEXT_CALLBACK:return t.adbmsg_getContextCallback();case t.hostCallbacks.TRIGGER_ON_READY_CALLBACKS:for(var a=0;a<t.adbmsg_onReadyCallbacks.length;a++)t.adbmsg_onReadyCallbacks[a]()}}catch(e){}return null},this.initializeCallbacks=function(){t.adbmsg_initSuccessCallback=i.default.initJson.callbacks.initCallback||t.adbmsg_initSuccessCallback,t.adbmsg_initErrorCallback=i.default.initJson.callbacks.initErrorCallback||t.adbmsg_initErrorCallback,t.adbmsg_signCallback=i.default.initJson.callbacks.signInProvider||t.adbmsg_signCallback,t.adbmsg_getContextCallback=i.default.initJson.callbacks.getContextCallback||t.adbmsg_getContextCallback,t.adbmsg_onReadyCallbacks.push(i.default.initJson.callbacks.onReadyCallback||function(){})},this.registerForOnReadyCallback=function(e){e&&(i.default.isAdobeMessagingClientReady?e():t.adbmsg_onReadyCallbacks.push(e))},this.adbmsg_initSuccessCallback=function(){},this.adbmsg_initErrorCallback=function(){},this.adbmsg_signCallback=function(){},this.adbmsg_getContextCallback=function(){},this.adbmsg_onReadyCallbacks=[]}return a(e,[{key:"hostCallbacks",get:function(){return o}}]),e}();t.default=new s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=new function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLIENT_DEV_PATH="https://dev-client.messaging.adobe.com",this.CLIENT_QE_PATH="https://qe-client.messaging.adobe.com",this.CLIENT_STAGE_PATH="https://stage-client.messaging.adobe.com",this.CLIENT_INTEGRATION_PATH="https://integration-client.messaging.adobe.com",this.CLIENT_PROD_PATH="https://client.messaging.adobe.com",this.CLIENT_AUTHORING_PATH="https://authoring-client.messaging.adobe.com",this.DEFAULT_SERVER_URL="https://server.messaging.adobe.com",this.LOG_API_PATH="/core/v1/log",this.INIT_API_PATH="/core/v1/messaging/init",this.SET_POPUP_COOKIE_PATH="/core/v1/messaging/setPopUpCookie"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=f(n(0));n(25);var i=f(n(3)),o=f(n(1)),s=f(n(2)),r=f(n(10)),l=f(n(6)),d=f(n(9)),u=f(n(14)),c=f(n(11)),p=f(n(8));function f(e){return e&&e.__esModule?e:{default:e}}n(35),n(36);t.default=new function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.getMessageUIInitPayload=function(){var e=window.location.origin;return a.default.initJson.appType&&"desktop"===a.default.initJson.appType.toLowerCase()&&(e="*"),{namespace:"adbmsg",window_origin:e,iframe_origin:a.default.getMessagingUIURL(),popped:a.default.getMessagingWindowState()===a.default.messagingWindowStateEnum.POPOUT,hostAnalyticsCallbackPresent:!!a.default.initJson.callbacks.analyticsCallback,params:a.default.getCommonAnalyticsParams(),context:a.default.getContextInfo(),userProfile:a.default.userProfile}},this.getMessagingClientHashedUrl=function(){var e=window.location.origin;e||(e=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),a.default.initJson.appType&&"desktop"===a.default.initJson.appType.toLowerCase()&&(e="*");var t={window_origin:e,iframe_origin:a.default.getMessagingUIURL(),popped:a.default.getMessagingWindowState()===a.default.messagingWindowStateEnum.POPOUT};return a.default.getMessagingUIURL()+"?lc="+a.default.initJson.language+"_"+a.default.initJson.region+"#"+encodeURIComponent(JSON.stringify(t))},this.isMobile=function(){return window.innerHeight<=610&&window.innerWidth<=414},this.loadIframeUI=function(){t.adbmsgContentIframe.setAttribute("frameBorder",0),t.adbmsgContentIframe.setAttribute("src",t.getMessagingClientHashedUrl())},this.addSpinner=function(){t.waitSpinner=p.default.createElement("div","spectrum,spectrum--light",t.adbmsgContentContainer);var e=p.default.createElement("div","spectrum-CircleLoader,spectrum-CircleLoader--indeterminate,spectrum-CircleLoader,react-spectrum-Wait--centered,spinnner",p.default.createElement("div","wait-wrapper",t.waitSpinner));p.default.createElement("div","spectrum-CircleLoader-track",e);var n=p.default.createElement("div","spectrum-CircleLoader-fills",e),a=p.default.createElement("div","spectrum-CircleLoader-fillMask1",n),i=p.default.createElement("div","spectrum-CircleLoader-fillMask2",n),o=p.default.createElement("div","spectrum-CircleLoader-fillSubMask1",a),s=p.default.createElement("div","spectrum-CircleLoader-fillSubMask2",i);p.default.createElement("div","spectrum-CircleLoader-fill",o),p.default.createElement("div","spectrum-CircleLoader-fill",s)},this.removeSpinner=function(){t.waitSpinner&&(t.waitSpinner.style.display="none",t.waitSpinner.parentNode.removeChild(t.waitSpinner))},this.showSpinner=function(){t.waitSpinner&&(t.waitSpinner.style.display="block")},this.hideCTA=function(){t.adbmsgCta.style.display="none",t.adbmsgCta.setAttribute("aria-expanded","true")},this.showCTA=function(){t.adbmsgCta.style.display="block",t.adbmsgCta.setAttribute("aria-expanded","false")},this.handleOpenMessagingWindow=function(e){if(!a.default.isAdobeMessagingClientLoadStarted){var n=i.default.sendMessageToHost(i.default.hostCallbacks.GET_CONTEXT_CALLBACK);n&&("teamAdmin"===n.userRole&&a.default.serverInitResponse.agentFallbackLocale&&a.default.serverInitResponse.enterpriseTeamLocale&&a.default.serverInitResponse.agentFallbackLocale!=a.default.serverInitResponse.enterpriseTeamLocale&&(a.default.serverInitResponse.agentFallbackLocale=a.default.serverInitResponse.enterpriseTeamLocale),a.default.updateInitContext(n))}if(e&&e.sourceType){var o=e.componentid||a.default.initJson.componentid,s=(e.componentver||a.default.initJson.componentver,e.sourceType),r=e.sourceText||"",p={"event.workflow":"init","event.subcategory":"launch","event.type":"click"};"AdobeMessaging"===o?t.badgeVisible?p["event.subtype"]="unread":p["event.subtype"]="new":o&&(p["event.subtype"]=o.toLowerCase()),s&&r&&(p["content.name"]=(s+"-"+r).toLowerCase()),l.default.sendEvent(p)}a.default.serverInitResponse.releaseControl.showAdobeMessaging&&(u.default.removeSalesPopUp(),c.default.removeEngagementPopUp(),a.default.isAdobeMessagingClientLoadStarted?d.default.getLoadCompleteState()&&(t.hideCTA(),t.adbmsgContentContainer.style.display="block",d.default.sendMessageToMessagingUI(d.default.uiMessagesEnum.WINDOW_OPENED),t.badgeVisible&&d.default.sendMessageToMessagingUI(d.default.uiMessagesEnum.REFRESH_MESSAGE_UI)):(a.default.isAdobeMessagingClientLoadStarted=!0,a.default.initJson.lazyLoad?t.loadIframeUI():n?d.default.sendMessageToMessagingUI(d.default.uiMessagesEnum.START_SERVICE_CONNECTION,n):d.default.sendMessageToMessagingUI(d.default.uiMessagesEnum.START_SERVICE_CONNECTION),t.hideCTA(),t.adbmsgContentContainer.style.display="block"),t.adbmsgContentContainer.classList.remove("downwardAnimate"),t.adbmsgContentContainer.classList.add("upwardAnimate"),t.showConversationMarker(!1),t.isMobile()&&setTimeout(function(){window.onhashchange=null,location.hash+="#messaging",setTimeout(function(){window.onhashchange=function(){location.hash.includes("#messaging")||t.handleMinimizeMessagingWindow()}},0)},0))},this.handleWSCreationForClientWindow=function(){s.default.log("Creating WS for host window"),r.default.info("Going to create session because of new session created in pop out for appid: ",a.default.initJson.appid," and client id: ",a.default.initJson.clientId),d.default.sendMessageToMessagingUI(d.default.uiMessagesEnum.START_SERVICE_CONNECTION,null,!1)},this.handleMinimizeMessagingWindow=function(e){e||d.default.sendMessageToMessagingUI(d.default.uiMessagesEnum.WINDOW_MINIMIZED),t.adbmsgContentContainer.classList.remove("upwardAnimate"),t.adbmsgContentContainer.classList.add("downwardAnimate"),a.default.getMessagingWindowState()===a.default.messagingWindowStateEnum.POPOUT&&(a.default.setMessagingWindowState(a.default.messagingWindowStateEnum.DOCKED),clearInterval(t.timer)),setTimeout(function(){t.adbmsgContentContainer.style.display="none"},250);var n=a.default.serverInitResponse;a.default.conversationActive?n.uiPolicy.showButtonAfterClose?t.showCTA():t.hideCTA():n.uiPolicy.showCTA?t.showCTA():t.hideCTA(),t.showConversationMarker(!1),t.isMobile()&&location.hash.includes("#messaging")&&(location.hash=location.hash.replace("#messaging",""))},this.handleCloseMessagingWindow=function(e){t.handleMinimizeMessagingWindow(e),e&&(a.default.isAdobeMessagingClientLoadStarted=!1)},this.checkTabPress=function(e){var n=document.activeElement;if(null!==n)if(9===e.keyCode&&n.className.indexOf("adbmsgCta")>-1)-1===n.className.split(" ").indexOf("focus-ring")&&(n.className+=" focus-ring");else{n=t.adbmsgCta;var a=new RegExp("\\bfocus-ring\\b","g");n.className=n.className.replace(a,"")}},this.handleCtaClick=function(e){e.preventDefault(),e.stopPropagation(),t.handleOpenMessagingWindow({appid:a.default.initJson.appid,appver:a.default.initJson.appver,componentid:o.default.getClientAppId(),componentver:o.default.getClientVersion(),sourceType:"button",sourceText:"button"})},this.simulateCTAClick=function(){t.timeoutCta&&(clearTimeout(t.timeoutCta),t.timeoutCta=void 0),t.handleOpenMessagingWindow({appid:a.default.initJson.appid,appver:a.default.initJson.appver,componentid:o.default.getClientAppId(),componentver:o.default.getClientVersion(),sourceType:"auto",sourceText:"button"})},this.resizeDimension=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(u.default.handleResizeDimension(),c.default.handleResizeDimension(),window.innerWidth<=414?(t.adbmsgContentContainer.style.width=window.innerWidth+"px",t.adbmsgContentIframe.style.width=window.innerWidth+"px"):(t.adbmsgContentContainer.style.width="380px",t.adbmsgContentIframe.style.width="380px"),window.innerHeight<=190?(t.adbmsgContentContainer.style.height=window.innerHeight+"px",t.adbmsgContentIframe.style.height=window.innerHeight+"px"):window.innerHeight<=620&&window.innerWidth>=415?(t.adbmsgContentContainer.style.height=window.innerHeight-40+"px",t.adbmsgContentIframe.style.height=window.innerHeight-40+"px"):window.innerHeight<=610?(t.adbmsgContentContainer.style.height=window.innerHeight+"px",t.adbmsgContentIframe.style.height=window.innerHeight+"px"):(t.adbmsgContentContainer.style.height="580px",t.adbmsgContentIframe.style.height="580px"),setTimeout(function(){window.outerHeight===screen.height?(t.openedInFullScreenMode||a.default.isAdobeMessagingClientLoadStarted&&d.default.sendMessageToMessagingUI(d.default.uiMessagesEnum.POP_OUT_STATE,{canPopOut:!1}),t.openedInFullScreenMode=!0):(t.openedInFullScreenMode&&a.default.isAdobeMessagingClientLoadStarted&&d.default.sendMessageToMessagingUI(d.default.uiMessagesEnum.POP_OUT_STATE,{canPopOut:!0}),t.openedInFullScreenMode=!1)},100),!n){var i=Number(t.adbmsgContentContainer.style.width.substr(0,t.adbmsgContentContainer.style.width.length-2)),o=t.adbmsgContentContainer.offsetLeft,s=window.innerWidth-i-o;i+s>=420&&(o>0?t.adbmsgContentContainer.style.right=s+"px":"block"===t.adbmsgContentContainer.style.display&&(t.adbmsgContentContainer.style.right=window.innerWidth-i+"px"))}},this.removeJarvisElement=function(){var e=!0;try{t.adbMsgClientWrapper&&(t.adbMsgClientWrapper.parentNode.removeChild(t.adbMsgClientWrapper),d.default.setInitialServerPoliciesApplied(!1),d.default.setLoadCompletedState(!1),r.default.info("Successfully removed Jarvis element to re-render because of version change for appID: ",a.default.initJson.appid," and client id: ",a.default.initJson.clientId))}catch(t){e=!1,r.default.error("Exception in removing Jarvis Element with exception stack trace : ",t.stack," for appID: ",a.default.initJson.appid," and client id: ",a.default.initJson.clientId)}return e},this.renderJarvisElement=function(e){if(e.releaseControl.showAdobeMessaging){var n=a.default.getMessagingUIURL();if(a.default.handleInitResponse(e),n&&n===e.releaseControl.adobeMessagingClientURL)return s.default.info("Received same messaging UI URL, thereofore not reloading for appID: ",a.default.initJson.appid," and client id: ",a.default.initJson.clientId),r.default.info("Received same messaging UI URL, thereofore not reloading for appID: ",a.default.initJson.appid," and client id: ",a.default.initJson.clientId),void t.applyInitialServerPolicies();var i=a.default.serverInitResponse;if(t.removeJarvisElement()){var o=a.default.serverInitResponse,l=a.default.config.js_url;s.default.log("base_url : "+l),t.adbMsgClientWrapper=p.default.createElement("div","adbMsgClientWrapper",document.body),t.adbMsgClientWrapper.id="adbMsgClientWrapper",t.adbmsgContainer=p.default.createElement("div","adbmsgContainer",t.adbMsgClientWrapper),t.adbmsgContainer.id="adbmsgContainer",t.adbmsgCta=p.default.createElement("button","adbmsgCta",t.adbmsgContainer),t.adbmsgCta.id="adbmsgCta",t.adbmsgCta.setAttribute("aria-label",o.localizedData.ctaText),t.adbmsgCta.classList.add("outwardAnimate"),t.adbmsgCta.addEventListener?t.adbmsgCta.addEventListener("click",t.handleCtaClick,!1):t.adbmsgCta.attachEvent&&t.adbmsgCta.attachEvent("onclick",t.handleCtaClick),t.adbmsgbadge=p.default.createElement("span","adbmsgbadge",t.adbmsgCta);var d=p.default.createElement("p","adbmsg-tooltip",t.adbmsgCta),u=document.createTextNode(o.localizedData.ctaText);d.appendChild(u),t.adbmsgContentContainer=p.default.createElement("div","adbmsgContentContainer",t.adbmsgContainer),t.adbmsgContentContainer.id="adbmsgContentContainer",t.adbmsgContentHeader=p.default.createElement("div","adbmsgContentHeader",t.adbmsgContentContainer),t.adbmsgContentIframe=p.default.createElement("iframe","adbmsgContentIframe",t.adbmsgContentContainer),t.addPopUps(),i.uiPolicy.openMessagingWindow&&(a.default.initJson.lazyLoad=!1),a.default.initJson.lazyLoad?(t.addSpinner(),t.applyInitialServerPolicies()):t.loadIframeUI(),t.handleWindowClick(),t.handleWindowFocus(),t.resizeDimension(null,!0),window.addEventListener("resize",t.resizeDimension),t.handleDrag(),document.addEventListener("keyup",function(e){t.checkTabPress(e)},!1),document.addEventListener("mousedown",function(e){t.checkTabPress(e)},!1)}}},this.handleDragWidth=function(e){"INCREASE"===e?t.adbmsgContentHeader.setAttribute("style","width: -moz-calc(100% - 44px); width: -webkit-calc(100% - 44px); width: -o-calc(100% - 44px); width: calc(100% - 44px);"):t.adbmsgContentHeader.setAttribute("style","width: -moz-calc(100% - 118px); width: -webkit-calc(100% - 118px); width: -o-calc(100% - 118px); width: calc(100% - 118px);")},this.handleWindowFocus=function(){window.onfocus=function(){a.default.isAdobeMessagingClientLoadStarted&&d.default.sendMessageToMessagingUI(d.default.uiMessagesEnum.CLIENT_FOCUS_STATE,{isInFocus:!0})},window.onblur=function(){a.default.isAdobeMessagingClientLoadStarted&&d.default.sendMessageToMessagingUI(d.default.uiMessagesEnum.CLIENT_FOCUS_STATE,{isInFocus:!1})}},this.handleWindowClick=function(){document.addEventListener("click",function(e){t.dragged?t.dragged=!1:null!=document.getElementById("adbmsgContentContainer")&&"block"==document.getElementById("adbmsgContentContainer").style.display&&t.handleMinimizeMessagingWindow()})},this.handleDrag=function(){var e=0,n=0,a=function(a){(a=a||window.event).preventDefault&&a.preventDefault();var i=n+e-a.clientX;i<0&&(i=0),i+380>window.innerWidth&&(i=window.innerWidth-380),t.adbmsgContentContainer.style.right=i+"px"},i=function i(){e=0,n=0,t.adbmsgContentIframe.classList.remove("ignoreMouse"),document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",i),document.removeEventListener("mouseleave",i)};t.adbmsgContentHeader.addEventListener("mousedown",function(o){t.dragged=!0,(o=o||window.event).preventDefault&&o.preventDefault(),e=o.clientX,n=window.innerWidth-t.adbmsgContentContainer.offsetLeft-380,t.adbmsgContentIframe.classList.add("ignoreMouse"),document.addEventListener("mousemove",a),document.addEventListener("mouseup",i),document.addEventListener("mouseleave",i)})},this.addPopUps=function(){t.showConversationMarker(!1);var e=a.default.serverInitResponse;if("none"!=e.uiPolicy.ctaStyleOverride&&t.adbmsgCta.classList.add(e.uiPolicy.ctaStyleOverride),"none"!=e.uiPolicy.wndStyleOverride&&t.adbmsgContentContainer.classList.add(e.uiPolicy.wndStyleOverride),e.uiPolicy.yOffset){var n=e.uiPolicy.yOffset;!isNaN(n)&&n>0&&(t.adbmsgCta.style.bottom=n+"px")}e.messagingState.conversationExists||(e.engagementPopUpModel?c.default.addEngagementPopUpToDOM(e,e.engagementPopUpModel,t.adbmsgCta,t.adbmsgContainer):e.showPopUp&&u.default.addSalesPopUpToDOM(e,t.adbmsgCta,t.adbmsgContainer))},this.renderCTAasPerPolicy=function(e,n){e&&0!=e.uiPolicy.loadDelay?setTimeout(function(){t.showCTA(),l.default.sendEvent({"event.workflow":"init","event.subcategory":"launch","event.type":"render","event.subtype":"read","content.name":"button"},!1),t.showConversationMarker(n)},1e3*e.uiPolicy.loadDelay):(t.showCTA(),t.showConversationMarker(n),l.default.sendEvent({"event.workflow":"init","event.subcategory":"launch","event.type":"render","event.subtype":"read","content.name":"button"},!1))},this.applyInitialServerPolicies=function(){d.default.setInitialServerPoliciesApplied(!0),a.default.setOnReadyStateAndTriggerPendingCallbacks();var e=a.default.serverInitResponse;if(e.messagingState.conversationExists&&(a.default.conversationActive=!0),e.uiPolicy.openMessagingWindow)t.hideCTA(),e.viaUpdateAccessTokenPath?r.default.info("Not creating session for conversation exists as it is via UpdateAccessToken Path for appid: ",a.default.initJson.appid):t.handleOpenMessagingWindow({appid:a.default.initJson.appid,appver:a.default.initJson.appver,componentid:o.default.getClientAppId(),componentver:o.default.getClientVersion(),sourceType:"auto",sourceText:"button"});else if(e.messagingState.conversationExists)e.uiPolicy.showCTA?t.renderCTAasPerPolicy(e,!0):t.showCTA();else{var n=e.engagementPopUpModel;if(n){n.controls.showCtaWithPopUp&&e.uiPolicy.showCTA&&t.renderCTAasPerPolicy(e);var i=n.controls.loadDelay;i&&i>0?setTimeout(function(){c.default.showEngagementPopUp()},1e3*i):c.default.showEngagementPopUp()}else e.uiPolicy.showCTA&&t.renderCTAasPerPolicy(e),e.showPopUp&&e.popUpLoadDelay&&0!=e.popUpLoadDelay?setTimeout(function(){u.default.showSalesPopUp(!0)},1e3*e.popUpLoadDelay):u.default.showSalesPopUp(!0)}},this.showConversationMarker=function(e){var n={},i=a.default.serverInitResponse;e?a.default.serverInitResponse.uiPolicy.showDotAfterClose&&(o.default.isHidden(t.adbmsgCta)||(t.badgeVisible||(l.default.sendEvent({"event.workflow":"init","event.subcategory":"launch","event.type":"render","event.subtype":"unread","content.name":"button"}),n.badgeState=!0,t.adbmsgCta.setAttribute("aria-label",i.localizedData.newMessageFromAgentText)),t.badgeVisible=!0,t.adbmsgbadge.style.display="block"),n.badgeState=!0,n.windowOpenState=o.default.isHidden(t.adbmsgCta),a.default.initJson.callbacks.badgeStateCallback&&a.default.initJson.callbacks.badgeStateCallback(n)):(t.badgeVisible=!1,t.adbmsgbadge.style.display="none",n.badgeState=!1,t.adbmsgCta.setAttribute("aria-label",i.localizedData.ctaText),n.windowOpenState=!1,a.default.initJson.callbacks.badgeStateCallback&&a.default.initJson.callbacks.badgeStateCallback(n))},this.applyHostOverrides=function(e){if(e){if(e.hasOwnProperty("cta")){var n=e.cta,a=t.adbmsgCta;a.classList.contains(n)||a.classList.add(n)}if(e.hasOwnProperty("wnd")){var i=e.wnd,o=t.adbmsgContentContainer;o.classList.contains(i)||o.classList.add(i)}}},this.getMessagingExperienceState=function(){return{windowState:o.default.isHidden(t.adbmsgContentContainer)?"hidden":a.default.messagingWindowState,ctaState:o.default.isHidden(t.adbmsgCta)?"hidden":"visible"}},this.handlePopOut=function(){var e=t.adbmsgContentContainer.clientWidth,n=t.adbmsgContentContainer.clientHeight+22;(navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")>0||0===navigator.platform.toLowerCase().indexOf("win"))&&(n=t.adbmsgContentContainer.clientHeight);var i=screen.width/2-e/2,o="titlebar = no, top = "+(screen.height/2-n/2)+" , left = "+i+", height = "+n+" , width = "+e,s=a.default.getMessagingWindowState();a.default.setMessagingWindowState(a.default.messagingWindowStateEnum.POPOUT);var r=window.open(t.getMessagingClientHashedUrl(),"",o);if(r){t.adbmsgContentContainer.style.display="none",t.hideCTA();var l=t.handleCloseMessagingWindow;t.poppedWindow=r,window.onbeforeunload=function(){t.poppedWindow&&(t.poppedWindow.close(),t.poppedWindow=null)};var d=setInterval(function(){r&&r.closed&&(clearInterval(d),t.poppedWindow=null,l())},100);t.timer=d}else a.default.setMessagingWindowState(s)},this.handlePopIn=function(){a.default.setMessagingWindowState(a.default.messagingWindowStateEnum.DOCKED),clearInterval(t.timer),t.poppedWindow.close(),t.poppedWindow=null,t.adbmsgContentContainer.style.display="block",t.hideCTA(),d.default.sendMessageToMessagingUI(d.default.uiMessagesEnum.WINDOW_OPENED)},this.poppedwindow,this.timer,this.adbmsgCta=void 0,this.adbmsgbadge=void 0,this.adbmsgContentContainer=void 0,this.adbmsgContentHeader=void 0,this.adbmsgContentIframe=void 0,this.openedInFullScreenMode=!1,this.timeoutCta=void 0,this.dragged=!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=d(n(0)),s=d(n(2)),r=d(n(26)),l=d(n(7));function d(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"initialize",value:function(e,t,n){this.project=e,this.env=t,this.ingestType=n,this.timeZoneString="";var a=-(new Date).getTimezoneOffset();a>=0?this.timeZoneString="+":(this.timeZoneString="-",a*=-1),this.timeZoneString+=("0"+parseInt(a/60)).slice(-2)+("0"+a%60).slice(-2)}},{key:"setAuthorization",value:function(e,t){this.userGuid=e,this.auth=t}},{key:"pad",value:function(e){return e<10?"0"+e:e}},{key:"getDateTimeString",value:function(){var e=new Date;return e.getFullYear()+"-"+this.pad(e.getMonth()+1)+"-"+this.pad(e.getDate())+"T"+this.pad(e.getHours())+":"+this.pad(e.getMinutes())+":"+this.pad(e.getSeconds())+"."+(e.getMilliseconds()/1e3).toFixed(3).slice(2,5)+this.timeZoneString}},{key:"sendEvent",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(o.default.IsCookiesEnabled())try{var n={events:[]},i=this.getDateTimeString(),d=r.default.v4(),u={};u.project=this.project,u.environment=this.env,u.ingesttype=this.ingestType,u.time=i,u.data=a({},o.default.getCommonAnalyticsParams(),e,{"event.dts_end":i,"event.guid":d}),o.default.userProfile.userGuid&&(u.data["event.user_guid"]=o.default.userProfile.userGuid),o.default.userProfile.serviceCode&&(u.data["user.service_code"]=o.default.userProfile.serviceCode),o.default.userProfile.serviceLevel&&(u.data["user.service_level"]=o.default.userProfile.serviceLevel),o.default.leConversationId&&(u.data["event.context_guid"]=o.default.leConversationId),o.default.initJson.appid&&(u.data["source.name"]=o.default.initJson.appid),o.default.initJson.clientId&&(u.data["source.client_id"]=o.default.initJson.clientId),o.default.initJson.language&&o.default.initJson.region&&(u.data["event.language"]=o.default.initJson.language+"_"+o.default.initJson.region),o.default.clientSessionId&&(u.data["event.session_guid"]=o.default.clientSessionId),o.default.initJson.cookies&&o.default.initJson.cookies.mcid&&(u.data["event.visitor_guid"]=o.default.initJson.cookies.mcid),o.default.initJson.context&&o.default.initJson.context.orgId&&(u.data["event.org_guid"]=o.default.initJson.context.orgId),!u.data["content.status"]&&o.default.skillName&&(u.data["content.status"]=o.default.skillName),o.default.serverInitResponse&&o.default.serverInitResponse.cookieGuid&&(u.data["source.device"]=o.default.serverInitResponse.cookieGuid),n.events.push(u);var c=l.default.createXMLHttp();"prod"===this.env?c.open("post","https://cc-api-data.adobe.io/ingest/",!0):"prod"===o.default.initJson.analyticsServerEnv?(c.open("post","https://cc-api-data.adobe.io/ingest/",!0),u.environment="prod"):c.open("post","https://cc-api-data-stage.adobe.io/ingest/",!0),navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")>0&&(c.responseType="text"),c.setRequestHeader("Content-Type","application/json"),c.setRequestHeader("x-api-key","messaging-web-service"),o.default.initJson.accessToken&&c.setRequestHeader("Authorization",o.default.initJson.accessToken),c.timeout=5e3;var p=e["event.workflow"]+" - "+e["event.subcategory"]+" - "+e["event.type"]+" - "+e["event.subtype"];c.onload=function(){c.status>=200&&c.status<400?s.default.log("Successfully sent event: "+p):s.default.warn("Error in sending event: "+p+" status: "+c.status+" Response: "+c.responseText)},c.onerror=function(){s.default.warn("Some Network error occurred while sending event: "+p)},c.ontimeout=function(){s.default.warn("Time out while sending event: "+p)},c.send(JSON.stringify(n)),o.default.initJson.callbacks.analyticsCallback&&t&&o.default.initJson.callbacks.analyticsCallback(n)}catch(e){s.default.warn("Exception while sending analytics events",e)}}}]),e}();t.default=new u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(n(0));var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"createXMLHttp",value:function(){if(void 0!==("undefined"==typeof XMLHttpRequest?"undefined":a(XMLHttpRequest)))return new XMLHttpRequest;if(window.ActiveXObject)for(var e=["MSXML2.XMLHttp.5.0","MSXML2.XMLHttp.4.0","MSXML2.XMLHttp.3.0","MSXML2.XMLHttp","Microsoft.XMLHttp"],t=0;t<e.length;t++)try{return new ActiveXObject(e[t])}catch(e){}}},{key:"ajax",value:function(e,t,n){var a=this.createXMLHttp();for(var i in a.open(n.type,n.url,!0),n.headers)n.headers.hasOwnProperty(i)&&a.setRequestHeader(i,n.headers[i]);n.withCredentials&&(a.withCredentials=!0),o.default.initJson.accessToken&&""!==o.default.initJson.accessToken.trim()&&a.setRequestHeader("Authorization",o.default.initJson.accessToken),n.timeout?a.timeout=n.timeout:a.timeout=3e4,a.onload=function(){200===a.status?a.responseType&&""!==a.responseType?e&&e(a.response):e&&e(a.responseText):t&&t(a.status)},a.onerror=function(){t&&t(400)},a.ontimeout=function(){t&&t(408)},n.data?a.send(JSON.stringify(n.data)):a.send()}}]),e}();t.default=new s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.createElement=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=document.createElement(e);return t&&t.split(",").forEach(function(e){return a.classList.add(e)}),n&&n.appendChild(a),a}}return a(e,[{key:"addFocusRingHandling",value:function(e){e.addEventListener("focus",function(){e.classList.add("focus-ring")},!1),e.addEventListener("blur",function(){e.classList.remove("focus-ring")},!1)}}]),e}();t.default=new i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=d(n(0)),o=d(n(3)),s=d(n(2)),r=d(n(5)),l=d(n(10));function d(e){return e&&e.__esModule?e:{default:e}}var u={SIGNIN:"SIGNIN",SIGNOUT:"SIGNOUT",SET_CONTEXT:"SET_CONTEXT",HOST_DATA:"HOST_DATA",UPDATE_ACCESS_TOKEN:"UPDATE_ACCESS_TOKEN",WINDOW_OPENED:"WINDOW_OPENED",WINDOW_MINIMIZED:"WINDOW_MINIMIZED",CLIENT_FOCUS_STATE:"CLIENT_FOCUS_STATE",UPDATE_USER_CONSENT:"UPDATE_USER_CONSENT",POP_OUT_STATE:"POP_OUT_STATE",START_SERVICE_CONNECTION:"START_SERVICE_CONNECTION",INITIAL_DATA:"INITIAL_DATA",REFRESH_MESSAGE_UI:"REFRESH_MESSAGE_UI",CHANGE_COOKIE_GUID:"CHANGE_COOKIE_GUID"},c=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.updateUrlParameter=function(e,t,n){n||(n=window.location.href);var a,i=new RegExp("([?&])"+e+"=.*?(&|#|$)(.*)","gi");if(i.test(n))return void 0!==t&&null!==t?n.replace(i,"$1"+e+"="+t+"$2$3"):(n=(a=n.split("#"))[0].replace(i,"$1$3").replace(/(&|\?)$/,""),void 0!==a[1]&&null!==a[1]&&(n+="#"+a[1]),n);if(void 0!==t&&null!==t){var o=-1!==n.indexOf("?")?"&":"?";return n=(a=n.split("#"))[0]+o+e+"="+t,void 0!==a[1]&&null!==a[1]&&(n+="#"+a[1]),n}return n},this.addDataToObj=function(e,t,n){for(var a=e,i=t.split("."),o=i.length,s=0;s<o-1;s++){var r=i[s];a[r]||(a[r]={}),a=a[r]}a[i[o-1]]=n},this.receiveMessage=function(e){try{var n=e.origin||e.originalEvent.origin;if(i.default.getMessagingUIURL().substr(0,n.length)!==n)return void s.default.log("Ignoring message received as event origin : ",n," and expected origin: ",i.default.getMessagingUIURL()," do not match");var a=e.data;try{if(0===!a.msgType.indexOf("adbmsg_"))return void s.default.log("Received data in post message that do not start with valid prefix, therefore ignoring")}catch(e){return void s.default.log("Exception in processing post Message received: ",e)}switch(a.msgType){case"adbmsg_POPOUT":r.default.handlePopOut();break;case"adbmsg_POPIN":r.default.handlePopIn();break;case"adbmsg_SIGNIN":var d=a.message,u=encodeURIComponent(JSON.stringify(d));window.adobeid&&window.adobeid.api_parameters&&window.adobeid.api_parameters.authorize&&window.adobeid.api_parameters.authorize.redirect_uri?t.addDataToObj(window,"adobeid.api_parameters.authorize.redirect_uri",t.updateUrlParameter("jarvisData",u,window.adobeid.api_parameters.authorize.redirect_uri)):window.adobeid&&window.adobeid.redirect_uri?t.addDataToObj(window,"adobeid.api_parameters.authorize.redirect_uri",t.updateUrlParameter("jarvisData",u,window.adobeid.redirect_uri)):t.addDataToObj(window,"adobeid.api_parameters.authorize.redirect_uri",t.updateUrlParameter("jarvisData",u,window.location.href)),o.default.sendMessageToHost(o.default.hostCallbacks.SIGN_IN_CALLBACK);break;case"adbmsg_NEW_MESSAGE":r.default.showConversationMarker(!0);break;case"adbmsg_LOAD_COMPLETE":s.default.log("Client message received: LOAD_COMPLETE or CONV_LOAD_COMPLETE"),t.handledLoadComplete=!0,t.sendMessageToMessagingUI(t.uiMessagesEnum.INITIAL_DATA,r.default.getMessageUIInitPayload());break;case"adbmsg_INITIAL_DATA_HANDLED":s.default.log("Client message received: INITIAL_DATA_HANDLED"),r.default.removeSpinner(),t.initialServerPoliciesApplied?i.default.initJson.lazyLoad?(l.default.info("Going to create session because of lazy load functionality for appid: ",i.default.initJson.appid," and client id: ",i.default.initJson.clientId),i.default.initJson.lazyLoad=!1,r.default.adbmsgCta.style.display="none",r.default.adbmsgContentContainer.style.display="block",t.sendMessageToMessagingUI(t.uiMessagesEnum.START_SERVICE_CONNECTION)):l.default.error("Received invalid initial data handled for appid: ",i.default.initJson.appid," and client id: ",i.default.initJson.clientId):r.default.applyInitialServerPolicies();break;case"adbmsg_CONV_CLOSED":i.default.conversationActive=!1,i.default.leConversationId="",i.default.skillName="",r.default.showConversationMarker(!1),i.default.initJson.callbacks.chatStateCallback&&i.default.initJson.callbacks.chatStateCallback(a.message);break;case"adbmsg_MINIMIZE_WINDOW":r.default.handleMinimizeMessagingWindow();break;case"adbmsg_CLOSE_WINDOW":r.default.handleDragWidth("INCREASE"),r.default.handleCloseMessagingWindow(!0);break;case"adbmsg_SEND_ANALYTICS_TO_HOST":i.default.initJson.callbacks.analyticsCallback&&i.default.initJson.callbacks.analyticsCallback(a.message);break;case"adbmsg_CONVERSATION_ID":i.default.leConversationId=a.message;break;case"adbmsg_CLIENT_SESSION_ID":i.default.clientSessionId=a.message;break;case"adbmsg_CHAT_STATE":a&&a.message&&"open"===a.message.chatState&&(i.default.conversationActive=!0,r.default.handleDragWidth("DECREASE")),i.default.initJson.callbacks.chatStateCallback&&i.default.initJson.callbacks.chatStateCallback(a.message);break;case"adbmsg_OPEN_WINDOW_WS":r.default.handleWSCreationForClientWindow();break;case"adbmsg_SKILL_NAME":i.default.skillName=a.message;break;case"adbmsg_ACCESS_TOKEN_FAILURE":i.default.initJson.appType&&"desktop"===i.default.initJson.appType.toLowerCase()&&o.default.sendMessageToHost(o.default.hostCallbacks.INIT_ERROR_CALLBACK,401)}}catch(e){s.default.error(e)}},this.sendMessageToMessagingUI=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t.handledLoadComplete){var o=i.default.getMessagingUIURL(),l="adbmsgui_"+e;try{document.getElementsByClassName("adbmsgContentIframe")[0].contentWindow.postMessage({msgType:l,message:n},o),a&&r.default.poppedWindow&&r.default.poppedWindow.postMessage({msgType:l,message:n},o)}catch(e){s.default.log(e)}}else s.default.warn("Not sending message to msgUI as it is currently not loaded")},this.startListening=function(){window.addEventListener("message",t.receiveMessage,!1)},this.stopListening=function(){},this.setInitialServerPoliciesApplied=function(e){t.initialServerPoliciesApplied=e},this.getInitialServerPoliciesApplied=function(){return t.initialServerPoliciesApplied},this.getLoadCompleteState=function(){return t.handledLoadComplete},this.setLoadCompletedState=function(e){t.handledLoadComplete=e},this.handledLoadComplete=!1,this.initialServerPoliciesApplied=!1}return a(e,[{key:"uiMessagesEnum",get:function(){return u}}]),e}();t.default=new c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=r(n(7)),o=r(n(0)),s=r(n(4));function r(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.publishToServer=function(e,n){var a={type:"post",url:o.default.initConfig.serverUrl?o.default.initConfig.serverUrl+s.default.LOG_API_PATH:s.default.DEFAULT_SERVER_URL+s.default.LOG_API_PATH,headers:{"Content-Type":"application/json","x-api-key":o.default.initJson.clientId}};a.data=t.getLog(e,n),i.default.ajax(null,null,a)},this.getLog=function(e,t){return{time:(new Date).getTime(),level:e,serverSessionGuid:o.default.serverSessionGuid,conversationId:o.default.conversationId,message:t}}}return a(e,[{key:"processLog",value:function(e,t){try{var n=t.map(function(e){return JSON.stringify(e)}).join(" ");this.publishToServer(e,n)}catch(e){}}},{key:"log",value:function(){var e=Array.prototype.slice.call(arguments);this.processLog("INFO",e)}},{key:"info",value:function(){var e=Array.prototype.slice.call(arguments);this.processLog("INFO",e)}},{key:"debug",value:function(){var e=Array.prototype.slice.call(arguments);this.processLog("DEBUG",e)}},{key:"warn",value:function(){var e=Array.prototype.slice.call(arguments);this.processLog("WARN",e)}},{key:"error",value:function(){var e=Array.prototype.slice.call(arguments);this.processLog("ERROR",e)}}]),e}();t.default=new l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=u(n(0)),i=u(n(2)),o=u(n(7)),s=u(n(30)),r=u(n(1)),l=u(n(8)),d=u(n(4));function u(e){return e&&e.__esModule?e:{default:e}}t.default=new function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.addEngagementPopUpToDOM=function(e,n,a,i){if(n){t.adbmsgEngagementPopUpContainer=l.default.createElement("div","adbmsgEngagementPopUpContainer,outwardAnimate",null),a?i.insertBefore(t.adbmsgEngagementPopUpContainer,a):i.appendChild(t.adbmsgEngagementPopUpContainer);var o=e.uiPolicy.yOffset;!isNaN(o)&&o>0?t.adbmsgEngagementPopUpContainer.style.bottom=o+60+52+"px":t.adbmsgEngagementPopUpContainer.style.bottom="152px",s.default.addPopUpToDOM(n,t.adbmsgEngagementPopUpContainer)}},this.showEngagementPopUp=function(){t.adbmsgEngagementPopUpContainer&&!a.default.isAdobeMessagingClientLoadStarted&&(window.innerWidth<=414?t.adbmsgEngagementPopUpContainerHiddenForMobileWidth=!0:t.adbmsgEngagementPopUpContainer.style.display="block")},this.hideEngagementPopUp=function(){t.adbmsgEngagementPopUpContainer&&(t.adbmsgEngagementPopUpContainer.style.display="none"),t.adbmsgEngagementPopUpContainerHiddenForMobileWidth=!1},this.removeEngagementPopUp=function(){t.adbmsgEngagementPopUpContainer&&(t.adbmsgEngagementPopUpContainer.parentNode.removeChild(t.adbmsgEngagementPopUpContainer),t.adbmsgEngagementPopUpContainer=void 0)},this.handleResizeDimension=function(){window.innerWidth<=414?t.adbmsgEngagementPopUpContainer&&!r.default.isHidden(t.adbmsgEngagementPopUpContainer)&&(t.hideEngagementPopUp(),t.adbmsgEngagementPopUpContainerHiddenForMobileWidth=!0):t.adbmsgEngagementPopUpContainerHiddenForMobileWidth&&(t.showEngagementPopUp(),t.adbmsgEngagementPopUpContainerHiddenForMobileWidth=!1)},this.setCookieByServerForPopUpClicked=function(e){var t=o.default.createXMLHttp();t.open("post",a.default.initConfig.serverUrl+d.default.SET_POPUP_COOKIE_PATH,!0),t.setRequestHeader("Content-Type","application/json"),a.default.initJson.accessToken&&""!==a.default.initJson.accessToken.trim()&&t.setRequestHeader("Authorization",a.default.initJson.accessToken),t.setRequestHeader("x-api-key",a.default.initJson.clientId),t.withCredentials=!0,t.timeout=3e4,t.onload=function(){t.status>=200&&t.status<400?i.default.info("The call to server to set the cookie for pop up option selected succeeded"):i.default.info("The call to server to set the cookie for pop up option selected failed")},t.onerror=function(){i.default.info("The call to server to set the cookie for pop up option selected failed")},t.ontimeout=function(){i.default.info("The call to server to set the cookie for pop up option selected timed out")},t.send(e)},this.adbmsgEngagementPopUpContainer=void 0,this.adbmsgEngagementPopUpContainerHiddenForMobileWidth=!1}},function(e,t,n){"use strict";var a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(a){var i=new Uint8Array(16);e.exports=function(){return a(i),i}}else{var o=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},function(e,t,n){"use strict";for(var a=[],i=0;i<256;++i)a[i]=(i+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,i=a;return[i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]]].join("")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=d(n(0)),i=d(n(3)),o=d(n(2)),s=d(n(6)),r=d(n(29)),l=d(n(1));function d(e){return e&&e.__esModule?e:{default:e}}t.default=new function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.addSalesPopUpToDOM=function(e,n,a){if(r.default.init(e),r.default.validate()){t.adbmsgSalesPopUpContainer=document.createElement("div"),t.adbmsgSalesPopUpContainer.classList.add("adbmsgSalesPopUpContainer"),n?a.insertBefore(t.adbmsgSalesPopUpContainer,n):a.appendChild(t.adbmsgSalesPopUpContainer);var i=e.uiPolicy.yOffset;!isNaN(i)&&i>0?t.adbmsgSalesPopUpContainer.style.bottom=i+60+52+"px":t.adbmsgSalesPopUpContainer.style.bottom="152px",r.default.addToDom(t.adbmsgSalesPopUpContainer)}},this.handleShowPopUp=function(){var e=i.default.sendMessageToHost(i.default.hostCallbacks.GET_CONTEXT_CALLBACK);e&&e.companyName&&(a.default.updateInitContext(e),r.default.recreateDom(t.adbmsgSalesPopUpContainer))},this.showSalesPopUp=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];r.default.validate()?t.adbmsgSalesPopUpContainer&&!a.default.isAdobeMessagingClientLoadStarted&&(e&&t.handleShowPopUp(),window.innerWidth<=414?t.adbmsgSalesPopUpContainerHiddenForMobileWidth=!0:(t.sentPopUpRenderAnalytics||(t.sentPopUpRenderAnalytics=!0,s.default.sendEvent({"event.workflow":"init","event.subcategory":"launch","event.type":"render","event.subtype":"pop-up","content.name":"button"})),t.adbmsgSalesPopUpContainer.style.display="block")):o.default.log("Pop up validation failed, not showing pop up.")},this.hideSalesPopUp=function(){t.adbmsgSalesPopUpContainer&&(t.adbmsgSalesPopUpContainer.style.display="none"),t.adbmsgSalesPopUpContainerHiddenForMobileWidth=!1},this.removeSalesPopUp=function(){t.adbmsgSalesPopUpContainer&&(t.adbmsgSalesPopUpContainer.parentNode.removeChild(t.adbmsgSalesPopUpContainer),t.adbmsgSalesPopUpContainer=void 0)},this.handleResizeDimension=function(){window.innerWidth<=414?t.adbmsgSalesPopUpContainer&&!l.default.isHidden(t.adbmsgSalesPopUpContainer)&&(t.hideSalesPopUp(),t.adbmsgSalesPopUpContainerHiddenForMobileWidth=!0):t.adbmsgSalesPopUpContainerHiddenForMobileWidth&&(t.showSalesPopUp(),t.adbmsgSalesPopUpContainerHiddenForMobileWidth=!1)},this.adbmsgSalesPopUpContainer=void 0,this.adbmsgSalesPopUpContainerHiddenForMobileWidth=!1,this.sentPopUpRenderAnalytics=!1}},function(e,t){},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=h(n(0)),s=h(n(5)),r=h(n(9)),l=h(n(3)),d=h(n(1)),u=h(n(2)),c=h(n(6)),p=h(n(37)),f=h(n(7)),g=h(n(10)),m=h(n(4));function h(e){return e&&e.__esModule?e:{default:e}}var v=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.handleInitSuccess=function(e){try{u.default.log("got successful response from server for init call: ",e);var t=JSON.parse(e),n={};n.releaseControl=a({},t.releaseControl),o.default.serverInitResponse.setShowAdobeMessaging(n.releaseControl.showAdobeMessaging),l.default.sendMessageToHost(l.default.hostCallbacks.INIT_SUCCESS_CALLBACK,n),t.releaseControl.showAdobeMessaging?s.default.renderJarvisElement(t):s.default.removeJarvisElement(),c.default.sendEvent({"event.workflow":"init","event.type":"response","event.subtype":"success"},!1)}catch(t){u.default.error("exception in handling init call response with response text: ",e,"and exception: ",t," and stack trace: ",t.stack),g.default.error("exception in handling init call response with response text: ",e,"and exception: ",t," and stack trace: ",t.stack)}},this.handleInitError=function(e){s.default.removeJarvisElement(),l.default.sendMessageToHost(l.default.hostCallbacks.INIT_ERROR_CALLBACK,e),c.default.sendEvent({"event.workflow":"init","event.type":"response","event.subtype":"error","event.error_code":e},!1)},this.makeInitCallToServer=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=t.getContextForServerInitCall(e);u.default.log("Sending context object to server : "+JSON.stringify(n));var a={type:"post",url:o.default.initConfig.serverUrl+m.default.INIT_API_PATH,headers:{"Content-Type":"application/json","x-api-key":o.default.initJson.clientId,Accept:"application/json"},withCredentials:!0};a.data=n,a.timeout=12e4,f.default.ajax(t.handleInitSuccess,t.handleInitError,a)},this.initializeServer=function(e){e=JSON.parse(e),"local"===o.default.env&&(e=p.default),o.default.setInitConfig(e),r.default.startListening(),t.makeInitCallToServer()},this._getCookies=function(){},this.initialize=function(e){try{if(o.default.initStarted)u.default.log("Messaging already initialized");else{n(38);o.default.initStarted=!0,e.msgdebug=!(!e.msgdebug&&"true"!==t.getQueryStringValue("msgdebug"));var a=e.analyticsServerEnv||t.getQueryStringValue("analyticsServerEnv");if(a&&(e.analyticsServerEnv=a),!e.accessToken){var i=t.getQueryStringValue("jarvisUserId");i&&(e.accessToken="Fake "+i)}o.default.handleInitData(e),l.default.initializeCallbacks(),u.default.log("Messaging Client version: "+o.default.getAppVersion()),c.default.initialize("messaging-web-service",o.default.env,"dunamis");var s={type:"get",url:d.default.getJarvisClientRootUrlByEnv()+"/initConfig.json",headers:{"Content-Type":"application/json"},withCredentials:!1};f.default.ajax(t.initializeServer,t.handleInitError,s),c.default.sendEvent({"event.workflow":"init","event.type":"request"},!1)}}catch(e){u.default.error(e)}},this.updateAccessToken=function(e){u.default.log("Received updated access token from surface for appid: ",o.default.initJson.appid,"and client id: ",o.default.initJson.clientId),o.default.updateAccessToken(e),r.default.sendMessageToMessagingUI(r.default.uiMessagesEnum.UPDATE_ACCESS_TOKEN,e),o.default.isAdobeMessagingClientLoadStarted||o.default.initConfig&&o.default.initConfig.hasOwnProperty("callAfterUpdateAccessToken")&&"false"!==o.default.initConfig.callAfterUpdateAccessToken.toString().toLowerCase()&&(u.default.log("Session not started for user and therefore re-making init call"),l.default.sendMessageToHost(l.default.hostCallbacks.INIT_ERROR_CALLBACK,500),g.default.info("Going to make init call after update access token for client id: ",o.default.initJson.clientId," with url: ",location.href),t.makeInitCallToServer(!0))},this.updateSurfaceFeatures=function(e){Array.isArray(e)&&(o.default.initJson.surfaceFeatures=e)},this.openMessagingWindow=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;o.default.isAdobeMessagingClientReady?setTimeout(function(){g.default.info("Received openMessagingWindow call from surface for appid: ",o.default.initJson.appid," and client id: ",o.default.initJson.clientId," with url: ",location.href),s.default.handleOpenMessagingWindow(e)},500):(g.default.warn("Ignoring openMessagingWindow call from surface as Messaging is not ready."),u.default.warn("Ignoring openMessagingWindow call from surface as Messaging is not ready."))},this.closeMessageWindow=function(){o.default.isAdobeMessagingClientReady?s.default.handleCloseMessagingWindow():u.default.warn("Ignoring closeMessageWindow call from surface as Messaging is not ready.")},this.isConversationOpen=function(){return o.default.conversationActive},this.updateUserConsent=function(e){e.hasOwnProperty("cookiesEnabled")&&("true"===e.cookiesEnabled.toString().toLowerCase()?o.default.initJson.cookiesEnabled=!0:o.default.initJson.cookiesEnabled=!1,r.default.sendMessageToMessagingUI(r.default.uiMessagesEnum.UPDATE_USER_CONSENT,e))},this.applyExperienceOverride=function(e){s.default.applyHostOverrides(e)},this.registerForOnReadyCallback=function(e){l.default.registerForOnReadyCallback(e)},this.isAdobeMessagingClientInitialized=function(){return!!o.default.isAdobeMessagingClientReady},this.isAdobeMessagingClientEnabled=function(){return!!o.default.serverInitResponse&&o.default.serverInitResponse.releaseControl.showAdobeMessaging},this.handleSignIn=function(e){r.default.sendMessageToMessagingUI(r.default.uiMessagesEnum.SIGNIN,e)},this.handleSignOut=function(){r.default.sendMessageToMessagingUI(r.default.uiMessagesEnum.SIGNOUT)},this.getMessagingExperienceState=function(){return s.default.getMessagingExperienceState()}}return i(e,[{key:"getQueryStringValue",value:function(e){return decodeURIComponent(window.location.search.replace(new RegExp("^(?:.*[&\\?]"+encodeURIComponent(e).replace(/[\.\+\*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"))}},{key:"getContextForServerInitCall",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=a({},o.default.initJson);return t.clientVersion=d.default.getClientVersion(),t.viaUpdateAccessTokenPath=e,t}},{key:"sendHostData",value:function(e){var t=!0;for(var n in e)if(e.hasOwnProperty(n)){t=!1;break}void 0!=e&&null!=e&&!1===t?r.default.sendMessageToMessagingUI(r.default.uiMessagesEnum.HOST_DATA,e):u.default.log("HostData is null")}}]),e}();t.default=v,e.exports=v,window.AdobeMessagingExperienceClient?(u.default.error("Object AdobeMessagingExperienceClient already exists with url: ",location.href),g.default.error("Object AdobeMessagingExperienceClient already exists with url: ",location.href)):window.AdobeMessagingExperienceClient=new v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.appid,this.appver,this.appType="web",this.componentid,this.componentver,this.env="prod",this.surfaceFeatures=[],this.language,this.region,this.clientId="",this.accessToken,this.fontRequired=!1,this.cookiesEnabled=!1,this.theme="light",this.userRole="",this.cookies={},this.context={orgId:"",userData:{},companyName:""},this.otherContext={},this.callbacks={signInProvider:null,initCallback:null,initErrorCallback:null,getContextCallback:null,onReadyCallback:null,analyticsCallback:null,chatStateCallback:null,badgeStateCallback:null},this.userAgent,this.url,this.msgdebug=!1,this.lazyLoad=!1}return a(e,[{key:"validateAndModifyContext",value:function(e){void 0!=e&&null!=e&&(this.appid=e.appid||this.appid,this.appver=e.appver||this.appver,this.clientId=e.clientId||this.clientId,this.accessToken=e.accessToken||this.accessToken,this.cookiesEnabled=e.cookiesEnabled||this.cookiesEnabled,this.componentid=e.componentid||this.componentid,this.componentver=e.componentver||this.componentver,e.userRole&&(this.userRole=e.userRole),e.companyName&&(this.context.companyName=e.companyName||this.context.companyName),e.hasOwnProperty("surfaceFeatures")&&Array.isArray(e.surfaceFeatures)&&(this.surfaceFeatures=e.surfaceFeatures),e.orgId&&(this.context.orgId=e.orgId))}},{key:"validateAndInitContext",value:function(e){if(!(e.appid&&e.appver&&e.language&&e.region&&e.clientId))throw"Missing context params";if(this.appid=e.appid,this.appver=e.appver,this.appType=e.appType||this.appType,this.componentid=e.componentid||this.appid,this.componentver=e.componentver||this.appver,this.env=e.env||this.env,this.language=e.language,this.region=e.region,this.clientId=e.clientId,this.accessToken=e.accessToken||"",this.accessToken&&0===!this.accessToken.toLowerCase().indexOf("bearer"))throw"Bearer accesstoken required";e.fontRequired&&(this.fontRequired=e.fontRequired),this.cookiesEnabled=e.cookiesEnabled||this.cookiesEnabled,this.cookies=e.cookies||{},this.theme=e.theme||this.theme,this.otherContext=e.otherContext||this.otherContext,e.context&&(this.context.orgId=e.context.orgId||"",this.context.userData=e.context.userData||{},this.context.companyName=e.context.companyName||""),e.callbacks&&(this.callbacks.signInProvider=e.callbacks.signInProvider,this.callbacks.initCallback=e.callbacks.initCallback,this.callbacks.initErrorCallback=e.callbacks.initErrorCallback,this.callbacks.onReadyCallback=e.callbacks.onReadyCallback,this.callbacks.getContextCallback=e.callbacks.getContextCallback,this.callbacks.analyticsCallback=e.callbacks.analyticsCallback,this.callbacks.chatStateCallback=e.callbacks.chatStateCallback,this.callbacks.badgeStateCallback=e.callbacks.badgeStateCallback),e.msgdebug&&(this.msgdebug=e.msgdebug),e.analyticsServerEnv&&(this.analyticsServerEnv=e.analyticsServerEnv),this.url=window.location.href,this.userAgent=navigator.userAgent,e.userRole&&(this.userRole=e.userRole),e.hasOwnProperty("lazyLoad")&&(this.lazyLoad="true"===e.lazyLoad.toString().toLowerCase()),e.hasOwnProperty("surfaceFeatures")&&Array.isArray(e.surfaceFeatures)&&(this.surfaceFeatures=e.surfaceFeatures)}},{key:"updateAccessToken",value:function(e){this.accessToken=e}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(n(20));var s=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.setShowAdobeMessaging=function(e){t.releaseControl.showAdobeMessaging=e},this.customerType="consumer",this.isAgentAvailable=!0,this.fallbackLocale="en_US",this.uiFallbackLocale="en_US",this.agentFallbackLocale="en_US",this.enterpriseTeamLocale="",this.cookieGuid="",this.messagingState={windowState:"docked",conversationExists:!1},this.localizedData={},this.uiPolicy={loadDelay:0,showCTA:!0,openMessagingWindow:!0,ctaStyleOverride:null,wndStyleOverride:null,ctaFadeInDelay:0,ctaFadeOutDelay:0,ctaTransparency:0,showButtonAfterClose:!0,showDotAfterClose:!0,popOutEnabled:!0,soundEnabled:!0,wndType:"full"},this.releaseControl={showLegacy:!1,showAdobeMessaging:!1,adobeMessagingClientURL:"",floodgateData:{}},this.showPopUp=!1,this.popUpLoadDelay=0,this.ipAddress="",this.engagementPopUpModel=null,this.viaUpdateAccessTokenPath=!1}return i(e,[{key:"setResponse",value:function(e){this.customerType=e.customerType||this.customerType,this.isAgentAvailable=e.isAgentAvailable||this.isAgentAvailable,this.fallbackLocale=e.fallbackLocale||this.fallbackLocale,this.uiFallbackLocale=e.uiFallbackLocale||this.uiFallbackLocale,this.cookieGuid=e.cookieGuid||this.cookieGuid,this.ipAddress=e.ipAddress||this.ipAddress,e.agentFallbackLocale&&void 0!=e.agentFallbackLocale?this.agentFallbackLocale=e.agentFallbackLocale||this.agentFallbackLocale:this.agentFallbackLocale=this.fallbackLocale,this.messagingState=a({},this.messagingState,e.messagingState),this.localizedData=a({},this.localizedData,e.localizedData),this.uiPolicy=a({},this.uiPolicy,e.uiPolicy),this.releaseControl=a({},this.releaseControl,e.releaseControl),this.showPopUp=e.showPopUp||this.showPopUp,this.popUpLoadDelay=e.popUpLoadDelay||this.popUpLoadDelay,e.enterpriseTeamLocale&&(this.enterpriseTeamLocale=e.enterpriseTeamLocale),e.engagementPopUp?this.engagementPopUpModel=new o.default(e.engagementPopUp):this.engagementPopUpModel=null,e.hasOwnProperty("viaUpdateAccessTokenPath")&&"true"===e.viaUpdateAccessTokenPath.toString().toLowerCase()&&(this.viaUpdateAccessTokenPath=e.viaUpdateAccessTokenPath)}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){return e&&e.__esModule?e:{default:e}}(n(1)),i=n(21);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.default=function e(t){if(o(this,e),this.viewType="",this.content="",this.body="",this.iconURL="",this.controls={showCtaWithPopUp:!1,loadDelay:0},this.footer={buttons:[]},this.analyticsInfo={},this.viewType=t.viewType,this.content=t.content,t.body&&(this.body=t.body),t.iconURL)this.iconURL=t.iconURL;else if(t.iconPath){var n=a.default.getJarvisClientRootUrlByEnv();this.iconURL=""+n+t.iconPath}t.controls&&(t.controls.hasOwnProperty("showCtaWithPopUp")&&(this.controls.showCtaWithPopUp=t.controls.showCtaWithPopUp),t.controls.hasOwnProperty("loadDelay")&&(this.controls.loadDelay=t.controls.loadDelay)),t.footer&&t.footer.buttons&&(0,i.isArray)(t.footer.buttons)&&t.footer.buttons.length>0&&(this.footer.buttons=t.footer.buttons.map(function(e){return new function e(t){o(this,e),this.label="",this.action="",this.url="",this.key="",this.variant="primary",this.label=t.label,"openURL"===t.action&&(this.url=t.url),this.action=t.action,this.key=t.key,t.variant&&(this.variant=t.variant)}(e)})),t.analyticsInfo&&(this.analyticsInfo=t.analyticsInfo)}},function(e,t,n){"use strict";(function(e){var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},a=0;a<t.length;a++)n[t[a]]=Object.getOwnPropertyDescriptor(e,t[a]);return n},o=/%[sdj%]/g;t.format=function(e){if(!b(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(l(arguments[n]));return t.join(" ")}n=1;for(var a=arguments,i=a.length,s=String(e).replace(o,function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(a[n++]);case"%d":return Number(a[n++]);case"%j":try{return JSON.stringify(a[n++])}catch(e){return"[Circular]"}default:return e}}),r=a[n];n<i;r=a[++n])h(r)||!w(r)?s+=" "+r:s+=" "+l(r);return s},t.deprecate=function(n,a){if(void 0!==e&&!0===e.noDeprecation)return n;if(void 0===e)return function(){return t.deprecate(n,a).apply(this,arguments)};var i=!1;return function(){if(!i){if(e.throwDeprecation)throw new Error(a);e.traceDeprecation?console.trace(a):console.error(a),i=!0}return n.apply(this,arguments)}};var s,r={};function l(e,n){var a={seen:[],stylize:u};return arguments.length>=3&&(a.depth=arguments[2]),arguments.length>=4&&(a.colors=arguments[3]),m(n)?a.showHidden=n:n&&t._extend(a,n),y(a.showHidden)&&(a.showHidden=!1),y(a.depth)&&(a.depth=2),y(a.colors)&&(a.colors=!1),y(a.customInspect)&&(a.customInspect=!0),a.colors&&(a.stylize=d),c(a,e,a.depth)}function d(e,t){var n=l.styles[t];return n?"["+l.colors[n][0]+"m"+e+"["+l.colors[n][1]+"m":e}function u(e,t){return e}function c(e,n,a){if(e.customInspect&&n&&k(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(a,e);return b(i)||(i=c(e,i,a)),i}var o=function(e,t){if(y(t))return e.stylize("undefined","undefined");if(b(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(v(t))return e.stylize(""+t,"number");if(m(t))return e.stylize(""+t,"boolean");if(h(t))return e.stylize("null","null")}(e,n);if(o)return o;var s=Object.keys(n),r=function(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(n)),T(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return p(n);if(0===s.length){if(k(n)){var l=n.name?": "+n.name:"";return e.stylize("[Function"+l+"]","special")}if(C(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(E(n))return e.stylize(Date.prototype.toString.call(n),"date");if(T(n))return p(n)}var d,u="",w=!1,P=["{","}"];(g(n)&&(w=!0,P=["[","]"]),k(n))&&(u=" [Function"+(n.name?": "+n.name:"")+"]");return C(n)&&(u=" "+RegExp.prototype.toString.call(n)),E(n)&&(u=" "+Date.prototype.toUTCString.call(n)),T(n)&&(u=" "+p(n)),0!==s.length||w&&0!=n.length?a<0?C(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),d=w?function(e,t,n,a,i){for(var o=[],s=0,r=t.length;s<r;++s)A(t,String(s))?o.push(f(e,t,n,a,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(f(e,t,n,a,i,!0))}),o}(e,n,a,r,s):s.map(function(t){return f(e,n,a,r,t,w)}),e.seen.pop(),function(e,t,n){if(e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(d,u,P)):P[0]+u+P[1]}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,n,a,i,o){var s,r,l;if((l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?r=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(r=e.stylize("[Setter]","special")),A(a,i)||(s="["+i+"]"),r||(e.seen.indexOf(l.value)<0?(r=h(n)?c(e,l.value,null):c(e,l.value,n-1)).indexOf("\n")>-1&&(r=o?r.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+r.split("\n").map(function(e){return"   "+e}).join("\n")):r=e.stylize("[Circular]","special")),y(s)){if(o&&i.match(/^\d+$/))return r;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+r}function g(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function h(e){return null===e}function v(e){return"number"==typeof e}function b(e){return"string"==typeof e}function y(e){return void 0===e}function C(e){return w(e)&&"[object RegExp]"===P(e)}function w(e){return"object"===(void 0===e?"undefined":a(e))&&null!==e}function E(e){return w(e)&&"[object Date]"===P(e)}function T(e){return w(e)&&("[object Error]"===P(e)||e instanceof Error)}function k(e){return"function"==typeof e}function P(e){return Object.prototype.toString.call(e)}function S(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(n){if(y(s)&&(s=e.env.NODE_DEBUG||""),n=n.toUpperCase(),!r[n])if(new RegExp("\\b"+n+"\\b","i").test(s)){var a=e.pid;r[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,a,e)}}else r[n]=function(){};return r[n]},t.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=g,t.isBoolean=m,t.isNull=h,t.isNullOrUndefined=function(e){return null==e},t.isNumber=v,t.isString=b,t.isSymbol=function(e){return"symbol"===(void 0===e?"undefined":a(e))},t.isUndefined=y,t.isRegExp=C,t.isObject=w,t.isDate=E,t.isError=T,t.isFunction=k,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"===(void 0===e?"undefined":a(e))||void 0===e},t.isBuffer=n(23);var I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function A(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",function(){var e=new Date,t=[S(e.getHours()),S(e.getMinutes()),S(e.getSeconds())].join(":");return[e.getDate(),I[e.getMonth()],t].join(" ")}(),t.format.apply(t,arguments))},t.inherits=n(24),t._extend=function(e,t){if(!t||!w(t))return e;for(var n=Object.keys(t),a=n.length;a--;)e[n[a]]=t[n[a]];return e};var _="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function U(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(_&&e[_]){var t;if("function"!=typeof(t=e[_]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,_,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,a=new Promise(function(e,a){t=e,n=a}),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push(function(e,a){e?n(e):t(a)});try{e.apply(this,i)}catch(e){n(e)}return a}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),_&&Object.defineProperty(t,_,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,i(e))},t.promisify.custom=_,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],a=0;a<arguments.length;a++)n.push(arguments[a]);var i=n.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,s=function(){return i.apply(o,arguments)};t.apply(this,n).then(function(t){e.nextTick(s,null,t)},function(t){e.nextTick(U,t,s)})}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,i(t)),n}}).call(t,n(22))},function(e,t,n){"use strict";var a,i,o=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function l(e){if(a===setTimeout)return setTimeout(e,0);if((a===s||!a)&&setTimeout)return a=setTimeout,setTimeout(e,0);try{return a(e,0)}catch(t){try{return a.call(null,e,0)}catch(t){return a.call(this,e,0)}}}!function(){try{a="function"==typeof setTimeout?setTimeout:s}catch(e){a=s}try{i="function"==typeof clearTimeout?clearTimeout:r}catch(e){i=r}}();var d,u=[],c=!1,p=-1;function f(){c&&d&&(c=!1,d.length?u=d.concat(u):p=-1,u.length&&g())}function g(){if(!c){var e=l(f);c=!0;for(var t=u.length;t;){for(d=u,u=[];++p<t;)d&&d[p].run();p=-1,t=u.length}d=null,c=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===r||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function h(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new m(e,t)),1!==u.length||c||l(g)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=h,o.addListener=h,o.once=h,o.off=h,o.removeListener=h,o.removeAllListeners=h,o.emit=h,o.prependListener=h,o.prependOnceListener=h,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e){return e&&"object"===(void 0===e?"undefined":a(e))&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t,n){"use strict";"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t){},function(e,t,n){"use strict";var a=n(27),i=n(28),o=i;o.v1=a,o.v4=i,e.exports=o},function(e,t,n){"use strict";var a,i,o=n(12),s=n(13),r=0,l=0;e.exports=function(e,t,n){var d=t&&n||0,u=t||[],c=(e=e||{}).node||a,p=void 0!==e.clockseq?e.clockseq:i;if(null==c||null==p){var f=o();null==c&&(c=a=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==p&&(p=i=16383&(f[6]<<8|f[7]))}var g=void 0!==e.msecs?e.msecs:(new Date).getTime(),m=void 0!==e.nsecs?e.nsecs:l+1,h=g-r+(m-l)/1e4;if(h<0&&void 0===e.clockseq&&(p=p+1&16383),(h<0||g>r)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");r=g,l=m,i=p;var v=(1e4*(268435455&(g+=122192928e5))+m)%4294967296;u[d++]=v>>>24&255,u[d++]=v>>>16&255,u[d++]=v>>>8&255,u[d++]=255&v;var b=g/4294967296*1e4&268435455;u[d++]=b>>>8&255,u[d++]=255&b,u[d++]=b>>>24&15|16,u[d++]=b>>>16&255,u[d++]=p>>>8|128,u[d++]=255&p;for(var y=0;y<6;++y)u[d+y]=c[y];return t||s(u)}},function(e,t,n){"use strict";var a=n(12),i=n(13);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||a)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var r=0;r<16;++r)t[o+r]=s[r];return t||i(s)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=c(n(0)),o=c(n(1)),s=c(n(5)),r=c(n(14)),l=c(n(11)),d=c(n(6)),u=c(n(8));n(34),n(15),n(16);c(n(4));function c(e){return e&&e.__esModule?e:{default:e}}var p=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init=function(e){e&&e.localizedData&&(t.localizedData=e.localizedData)},this.getRandomAvatarUrl=function(){var e=Math.floor(15*Math.random())+1;return o.default.getJarvisClientRootUrlByEnv()+"/assets/sales-avatar-"+e+".png"},this.handleGetStartedDXSalesPopUp=function(e){e.preventDefault(),e.stopPropagation(),r.default.hideSalesPopUp(),s.default.handleOpenMessagingWindow({appid:i.default.initJson.appid,appver:i.default.initJson.appver,componentid:o.default.getClientAppId(),componentver:o.default.getClientVersion(),sourceType:"auto",sourceText:"button"}),d.default.sendEvent({"event.workflow":"init","event.subcategory":"launch","event.type":"click","event.subtype":"get-started","content.name":"button-button"});l.default.setCookieByServerForPopUpClicked(JSON.stringify({engagementPopUpId:"DXSales"}))},this.handleNotNowDXSalesPopUp=function(){d.default.sendEvent({"event.workflow":"init","event.subcategory":"launch","event.type":"click","event.subtype":"not-now","content.name":"button-button"}),r.default.hideSalesPopUp();l.default.setCookieByServerForPopUpClicked(JSON.stringify({engagementPopUpId:"DXSales"}))},this.validate=function(){var e=!0;return t.localizedData&&t.localizedData.popUpTitle&&t.localizedData.popUpDescription&&t.localizedData.popUpGetStartedButton&&t.localizedData.popUpNotNowButton||(e=!1),e},this.localizedData=void 0}return a(e,[{key:"renderHeader",value:function(e){var t=u.default.createElement("div","adbmsgSalesPopUpLogo",e);u.default.createElement("div","adbmsgSalesPopUpLogoSvg",t)}},{key:"renderInnerContent",value:function(e){var t=u.default.createElement("div","adbmsgSalesPopUpBody",e);this.renderBody(t);var n=u.default.createElement("div","adbmsgSalesPopUpControlContainer",e);this.renderControls(n)}},{key:"renderTitleWithCompanyName",value:function(e,t){return e.replace(/\$\{\w+\}/i,t)}},{key:"renderPopUpTitle",value:function(e,t){var n=this.localizedData.companyPopUpTitle;return n&&e?this.renderTitleWithCompanyName(n,t):this.localizedData.popUpTitle}},{key:"renderPopUpDescription",value:function(e){var t=this.localizedData.companyPopUpDescription;return e&&t?t:this.localizedData.popUpDescription}},{key:"renderBody",value:function(e){var t=i.default.initJson.context.companyName,n=!!t,a=u.default.createElement("div","adbmsgSalesPopUpAvatar",e);u.default.createElement("img","adbmsgSalesPopUpAvatarImg",a).src=this.getRandomAvatarUrl();var o=u.default.createElement("div","adbmsgSalesPopUpBodyPara",e),s=u.default.createElement("div","adbmsgSalesPopUpBodyParaTitle",o),r=""+this.renderPopUpTitle(n,t);s.innerHTML=r,u.default.createElement("div","adbmsgSalesPopUpBodyParaDescription",o).innerHTML=""+this.renderPopUpDescription(n)}},{key:"renderControls",value:function(e){var t=u.default.createElement("div","adbmsgSalesPopUpControls",e),n=u.default.createElement("button","spectrum-Button,spectrum-Button--quiet,spectrum-Button--overBackground",t),a=u.default.createElement("span","spectrum-Button-label",n);u.default.addFocusRingHandling(n),a.innerHTML=this.localizedData.popUpNotNowButton,n.setAttribute("aria-label",this.localizedData.popUpNotNowButton),n.addEventListener&&n.addEventListener("click",this.handleNotNowDXSalesPopUp,!1);var i=u.default.createElement("button","spectrum-Button,spectrum-Button--overBackground",t),o=u.default.createElement("span","spectrum-Button-label",i);u.default.addFocusRingHandling(i),o.innerHTML=this.localizedData.popUpGetStartedButton,i.setAttribute("aria-label",this.localizedData.popUpGetStartedButton),i.addEventListener&&i.addEventListener("click",this.handleGetStartedDXSalesPopUp,!1)}},{key:"addToDom",value:function(e){this.adbmsgSalesPopUpContent=u.default.createElement("div","adbmsgSalesPopUpContent",e);var t=u.default.createElement("div","adbmsgSalesPopUpHeader",this.adbmsgSalesPopUpContent);this.renderHeader(t);var n=u.default.createElement("div","adbmsgSalesPopUpInnerContent",this.adbmsgSalesPopUpContent);this.renderInnerContent(n)}},{key:"removeFromDom",value:function(){this.adbmsgSalesPopUpContent&&this.adbmsgSalesPopUpContent.parentNode.removeChild(this.adbmsgSalesPopUpContent)}},{key:"recreateDom",value:function(e){this.removeFromDom(),this.addToDom(e)}}]),e}();t.default=new p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=c(n(0)),o=c(n(1)),s=c(n(5)),r=c(n(11)),l=c(n(31)),d=c(n(6)),u=c(n(8));function c(e){return e&&e.__esModule?e:{default:e}}n(32),n(33),n(15),n(16);var p=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.addCampaignAnalyticsToEvent=function(e,t){t&&(t.variationId&&(e["exp.variation_id"]=t.variationId),t.actionBlockId&&(e["exp.action_block_id"]=t.actionBlockId),t.campaignId&&(e["exp.campaign_id"]=t.campaignId),t.responseGUID&&(e["exp.response_guid"]=t.responseGUID),t.surfaceId&&(e["exp.surface_id"]=t.surfaceId),t.containerId&&(e["exp.container_id"]=t.containerId),t.controlGroupId&&(e["exp.control_group_id"]=t.controlGroupId),t.treatmentId&&(e["exp.treatment_id"]=t.treatmentId))},this.handleButtonClick=function(e){var n={"event.workflow":"EngagementPopUP","event.type":"click","event.subtype":e.key,"content.name":t.engagementPopUpModel.analyticsInfo.analyticsId};if(t.addCampaignAnalyticsToEvent(n,t.engagementPopUpModel.analyticsInfo.campaignAnalyticsData),r.default.hideEngagementPopUp(),d.default.sendEvent(n),"closePopUp"===e.action){s.default.renderCTAasPerPolicy();var a={engagementPopUpId:t.engagementPopUpModel.analyticsInfo.analyticsId};r.default.setCookieByServerForPopUpClicked(JSON.stringify(a))}else if("openURL"===e.action){s.default.renderCTAasPerPolicy();var u=e.url+"#sa_src=web-messaging";l.default.openLinkDirectly(u,"_blank");var c={engagementPopUpId:t.engagementPopUpModel.analyticsInfo.analyticsId};r.default.setCookieByServerForPopUpClicked(JSON.stringify(c))}else"openChat"===e.action&&s.default.handleOpenMessagingWindow({appid:i.default.initJson.appid,appver:i.default.initJson.appver,componentid:o.default.getClientAppId(),componentver:o.default.getClientVersion(),sourceType:"engagementPopUp",sourceText:"button"})},this.renderBody=function(e){if(t.engagementPopUpModel.iconURL){var n=u.default.createElement("div","adbmsgEngagementPopUpAvatar",e);u.default.createElement("img","adbmsgEngagementPopUpAvatarImg",n).src=t.engagementPopUpModel.iconURL}var a=u.default.createElement("div","adbmsgEngagementPopUpBodyPara",e);(u.default.createElement("div","adbmsgEngagementPopUpBodyParaTitle",a).innerHTML=t.engagementPopUpModel.content,t.engagementPopUpModel.body)&&(u.default.createElement("div","adbmsgEngagementPopUpBodyParaDescription",a).innerHTML=t.engagementPopUpModel.body)},this.renderControls=function(e){for(var n=u.default.createElement("div","adbmsgEngagementPopUpControls,spectrum-ButtonGroup",e),a=0;a<t.engagementPopUpModel.footer.buttons.length;a++){var i=t.engagementPopUpModel.footer.buttons[a],o=null;o="primary"===i.variant?u.default.createElement("button","spectrum-Button,spectrum-Button--primary,spectrum-ButtonGroup-item",n):u.default.createElement("button","spectrum-Button,spectrum-Button--secondary,spectrum-Button--quiet,spectrum-ButtonGroup-item",n);var s=u.default.createElement("span","spectrum-Button-label",o);u.default.addFocusRingHandling(o),s.innerHTML=i.label,o.setAttribute("aria-label",i.label),o.addEventListener&&o.addEventListener("click",t.handleButtonClick.bind(t,i),!1)}},this.addPopUpToDOM=function(e,n){t.engagementPopUpModel=e,t.adbmsgEngagementPopUpContent=u.default.createElement("div","adbmsgEngagementPopUpContent",n),t.renderHeader(t.adbmsgEngagementPopUpContent);var a=u.default.createElement("div","adbmsgEngagementPopUpInnerContent",t.adbmsgEngagementPopUpContent);t.renderInnerContent(a);var i={"event.workflow":"EngagementPopUP","event.type":"render","content.name":t.engagementPopUpModel.analyticsInfo.analyticsId};t.addCampaignAnalyticsToEvent(i,t.engagementPopUpModel.analyticsInfo.campaignAnalyticsData),d.default.sendEvent(i)},this.engagementPopUpModel=null}return a(e,[{key:"renderHeader",value:function(e){u.default.createElement("div","adbmsgEngagementPopUpLogoImg",e)}},{key:"renderInnerContent",value:function(e){var t=u.default.createElement("div","adbmsgEngagementPopUpBody",e);this.renderBody(t),this.renderControls(e)}},{key:"removeFromDom",value:function(){this.adbmsgEngagementPopUpContent&&this.adbmsgEngagementPopUpContent.parentNode.removeChild(this.adbmsgEngagementPopUpContent)}},{key:"recreateDom",value:function(e,t){this.removeFromDom(),this.addToDom(e,t)}}]),e}();t.default=new p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=new function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.openLinkDirectly=function(e,t){t?window.open(e,t):window.open(e,"_blank")}}},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){e.exports={serverUrl:"http://localhost:9000",wsUrl:"http://localhost:9000",callAfterUpdateAccessToken:!0}},function(e,t,n){var a={"./Lightroom.png":39,"./cc_appicon.png":40,"./sales-avatar-1.png":41,"./sales-avatar-10.png":42,"./sales-avatar-11.png":43,"./sales-avatar-12.png":44,"./sales-avatar-13.png":45,"./sales-avatar-14.png":46,"./sales-avatar-15.png":47,"./sales-avatar-2.png":48,"./sales-avatar-3.png":49,"./sales-avatar-4.png":50,"./sales-avatar-5.png":51,"./sales-avatar-6.png":52,"./sales-avatar-7.png":53,"./sales-avatar-8.png":54,"./sales-avatar-9.png":55};function i(e){return n(o(e))}function o(e){var t=a[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}i.keys=function(){return Object.keys(a)},i.resolve=o,e.exports=i,i.id=38},function(e,t,n){e.exports=n.p+"assets/Lightroom.png"},function(e,t,n){e.exports=n.p+"assets/cc_appicon.png"},function(e,t,n){e.exports=n.p+"assets/sales-avatar-1.png"},function(e,t,n){e.exports=n.p+"assets/sales-avatar-10.png"},function(e,t,n){e.exports=n.p+"assets/sales-avatar-11.png"},function(e,t,n){e.exports=n.p+"assets/sales-avatar-12.png"},function(e,t,n){e.exports=n.p+"assets/sales-avatar-13.png"},function(e,t,n){e.exports=n.p+"assets/sales-avatar-14.png"},function(e,t,n){e.exports=n.p+"assets/sales-avatar-15.png"},function(e,t,n){e.exports=n.p+"assets/sales-avatar-2.png"},function(e,t,n){e.exports=n.p+"assets/sales-avatar-3.png"},function(e,t,n){e.exports=n.p+"assets/sales-avatar-4.png"},function(e,t,n){e.exports=n.p+"assets/sales-avatar-5.png"},function(e,t,n){e.exports=n.p+"assets/sales-avatar-6.png"},function(e,t,n){e.exports=n.p+"assets/sales-avatar-7.png"},function(e,t,n){e.exports=n.p+"assets/sales-avatar-8.png"},function(e,t,n){e.exports=n.p+"assets/sales-avatar-9.png"}])});